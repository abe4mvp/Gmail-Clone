<div id="login-nav" class="group">
	
	<div class="img-wrap group">
		<%= image_tag "AbeMail.png" %>
	</div>
</div>

<div id="login-wrap">
	<div class="new-session">
		<%= render :partial => 'sign_in' %>
	</div>

	<div >
		<%= render :partial => 'users/new_user' %>
	</div>
	
	<div id="toggle">
		<a href="#" >New Member? Click Here</a>
		<a class='invisible' href="#">Sign in with exisiting account</a>
	</div>
	
	<div>
		<br>
		<p>Employer? Click here!</p>
		<br>
		<%= link_to "Demo", "#", id: "demo"%>
	</div>
	
</div>


<footer> 
	<ul>
		<li>Created by: Abe Schonfeld</li>
		<li><a href="https://github.com/abe4mvp/Gmail-Clone">Source code</a></li>
		<li><a href="https://github.com/abe4mvp/">Github</li>
		<li><a href="http://www.linkedin.com/in/abeschonfeld">LinkedIn</a></li>
		<li><a href="http://abe4mvp.github.io/">Asteroids</a></li>
		<li><a href="mailto:abe.schonfeld@gmail.com?Subject=Hello%20Abe!" target="_top">Email me</a></li>
	</ul>
</footer>

<script type="text/javascript" charset="utf-8">
	
	$('#toggle a').on('click', function(){
		toggleLogin();
	});
	
	
	var toggleLogin = function () {
		$('#toggle a').toggleClass('invisible')
		$('.login').toggleClass("invisible");
	}
	
	$("#demo").on("click", function () {
		event.preventDefault();
		var $loginForm = $(".new-session form")
		console.log()
		if ($loginForm.hasClass("invisivble")) {
			toggleLogin();
		};
		
		
		// $(".new-session form #user_email")[0].value += "employer"
		
		var emailField = ".new-session form #user_email";
		var passwordField = ".new-session form #user_password";
		simulateTyping(emailField, "Employer", "Employer".length);
		simulateTyping(passwordField, "qwerty", "qwerty".length);
		
		
		//$(".new-session form").trigger("submit");
		
	})
	
	var simulateTyping = function (field, input) {
		var $field = $(field);
		console.log($field[0])
		// console
		var i = 0;
		var typer = setInterval(function () {
			var chr = input[i] 
			$field[0].value += chr
			if (++i >= input.length) {
				window.clearInterval(typer)
			}
		}, 300);

	};
	
	
		
</script>